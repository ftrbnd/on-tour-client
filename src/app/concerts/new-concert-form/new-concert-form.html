<form [formGroup]="concertForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
  <p-inputgroup>
    <p-inputgroup-addon>
      <i class="pi pi-user"></i>
    </p-inputgroup-addon>
    <div class="flex flex-col gap-1 w-full">
      <p-floatlabel variant="on">
        <p-select
          [editable]="true"
          [options]="artists()"
          optionLabel="name"
          optionValue="id"
          placeholder="Artist"
          formControlName="artistId"
          [invalid]="isInvalid('artistId')"
        />
        <label for="artistId">Artist</label>
      </p-floatlabel>

      @if (isInvalid('artistId') && concertForm.hasError('invalidSelection', 'artistId')) {
      <p-message severity="error" size="small" variant="simple">Please select an artist.</p-message>
      } @else{
      <p-message severity="info" size="small" variant="simple" ;
        >Don't see your artist?
        <a class="underline" routerLink="/artists/new"> Add them here! </a>
      </p-message>
      }
    </div>
  </p-inputgroup>

  <p-inputgroup>
    <p-inputgroup-addon>
      <i class="pi pi-building"></i>
    </p-inputgroup-addon>
    <div class="flex flex-col gap-1 w-full">
      <p-floatlabel variant="on">
        <p-select
          [editable]="true"
          [options]="venues()"
          optionLabel="name"
          optionValue="id"
          placeholder="Venue"
          formControlName="venueId"
          [invalid]="isInvalid('venueId')"
        />
        <label for="venueId">Venue</label>
      </p-floatlabel>

      @if (isInvalid('venueId') && concertForm.hasError('invalidSelection', 'venueId')) {
      <p-message severity="error" size="small" variant="simple">Please select a venue.</p-message>
      }@else {
      <p-message severity="info" size="small" variant="simple"
        >Don't see the venue?
        <a class="underline" routerLink="/venues/new"> Add it here! </a>
      </p-message>
      }
    </div>
  </p-inputgroup>

  <p-inputgroup>
    <p-inputgroup-addon>
      <i class="pi pi-map"></i>
    </p-inputgroup-addon>
    <div class="flex flex-col gap-1 w-full">
      <p-floatlabel variant="on">
        <input
          pInputText
          id="tour"
          type="text"
          formControlName="tour"
          [invalid]="isInvalid('tour')"
        />
        <label for="tour">Tour</label>
      </p-floatlabel>

      @if (isInvalid('tour') && concertForm.hasError('maxLength')) {
      <p-message severity="error" size="small" variant="simple"
        >Tour name must be under 100 characters.</p-message
      >
      }
    </div>
  </p-inputgroup>

  <p-inputgroup>
    <p-inputgroup-addon>
      <i class="pi pi-calendar"></i>
    </p-inputgroup-addon>
    <p-floatlabel variant="on">
      <p-datepicker formControlName="date" dateFormat="MM d, yy" [invalid]="isInvalid('date')" />
      <label for="date">Date</label>
    </p-floatlabel>
  </p-inputgroup>

  <p-button type="submit" [disabled]="!concertForm.valid">Submit</p-button>
</form>
