@if (isFullPage()) {
<div class="relative w-full h-24">
  <img
    [src]="concert()?.artist?.imageUrl"
    [alt]="concert()?.artist?.name"
    class="w-full h-full object-cover brightness-50"
  />

  <div class="absolute inset-y-6 flex w-full justify-between">
    <div class="flex-col">
      <h2 class="text-4xl font-bold">{{ concert()?.artist?.name }} - {{ concert()?.tour }}</h2>
      <h3 class="text-2xl text-muted-color">
        Reviewed by
        <a
          [routerLink]="['/user', concertLog().user?.username]"
          class="font-bold text-muted-color-emphasis hover:underline"
          >{{ concertLog().user?.username }}</a
        >
      </h3>
    </div>
  </div>
</div>
}
<p-card class="h-full justify-self-center mx-2">
  <div class="flex gap-2 items-center flex-col md:flex-row">
    @if (concert(); as concert) { @if (!isFullPage()) {
    <img
      [src]="concert.artist?.imageUrl"
      [alt]="concert.artist?.name"
      class="self-start w-full h-24 md:w-24 md:h-full object-cover rounded-sm md:rounded-md"
    />} }

    <div class="flex flex-col ml-2 w-full">
      <div class="flex flex-col items-start md:flex-row flex-wrap md:items-center gap-2">
        @if (concert(); as concert) { @if (!isFullPage()) {
        <a class="hover:underline" [routerLink]="['/concerts', concert.id]">
          <p class="font-bold">{{ concert.artist?.name }} - {{ concert.tour }}</p>
        </a>
        }}

        <div class="flex items-center gap-2 w-full">
          @if (!onUsersProfilePage() && !isFullPage()){
          <p class="text-muted-color">
            Reviewed by
            <a
              [routerLink]="['/user', concertLog().user?.username]"
              class="font-bold text-muted-color-emphasis hover:underline"
              >{{ concertLog().user?.username }}</a
            >
          </p>
          @if (authService.authUser()?.id === concertLog().userId) {
          <p-badge value="My review" severity="secondary" />
          } }
        </div>

        <div class="flex gap-2 items-center">
          <p-rating [(ngModel)]="concertLog().rating" [readonly]="true" />

          @if (concertLog().liked) {
          <i class="pi pi-heart-fill text-red-500"></i>
          } @else {
          <i class="pi pi-heart"></i>
          }
        </div>
      </div>

      <a class="hover:underline" [routerLink]="['/logs', concertLog().id]">
        <p class="pt-4 pb-2 line-clamp-3 md:line-clamp-5">{{ concertLog().review }}</p>
        @if (concert(); as concert) {
        <p class="text-muted-color text-xs text-end">{{ concert.date | date : 'shortDate' }}</p>
        }
      </a>
    </div>

    @if (authService.authUser()?.id == concertLog().userId && showMenu()) {
    <p-menu #menu [model]="items" [popup]="true" />
    <p-button
      class="self-end md:self-start"
      size="small"
      severity="secondary"
      (click)="menu.toggle($event)"
      icon="pi pi-ellipsis-v"
    />

    <app-concert-log-form
      [concert]="concert()"
      [previousConcertLog]="concertLog()"
      [(visible)]="showEdit"
    />
    <app-confirm-delete-log [concertLog]="concertLog()" [(visible)]="showDelete" />
    }
  </div>
</p-card>
