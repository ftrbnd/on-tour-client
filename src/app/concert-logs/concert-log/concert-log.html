<p-card class="h-full">
  <div class="flex gap-2 items-center flex-col md:flex-row">
    @if (concert(); as concert) {
    <img
      [src]="concert.artist?.imageUrl"
      [alt]="concert.artist?.name"
      class="self-start w-full h-24 md:w-24 md:h-full object-cover rounded-sm md:rounded-md"
    />
    }

    <div class="flex flex-col ml-2 w-full">
      <div class="flex flex-col items-start md:flex-row flex-wrap md:items-center gap-2">
        @if (concert(); as concert) {
        <a class="hover:underline" [routerLink]="['/concerts', concert.id]">
          <p class="font-bold">{{ concert.artist?.name }} - {{ concert.tour }}</p>
        </a>
        }

        <div class="flex items-center justify-between w-full">
          @if (!onUsersProfilePage()){
          <p class="text-muted-color">
            Reviewed by
            <a
              [routerLink]="['/user', concertLog().user?.username]"
              class="font-bold text-muted-color-emphasis hover:underline"
              >{{ concertLog().user?.username }}</a
            >
          </p>
          }
        </div>

        <div class="flex gap-2 items-center">
          <p-rating [(ngModel)]="concertLog().rating" [readonly]="true" />

          @if (concertLog().liked) {
          <i class="pi pi-heart-fill text-red-500"></i>
          } @else {
          <i class="pi pi-heart"></i>
          }
        </div>
      </div>

      <p class="pt-4 pb-2 line-clamp-3 md:line-clamp-5">{{ concertLog().review }}</p>
      @if (concert(); as concert) {
      <p class="text-muted-color text-xs text-end">{{ concert.date | date : 'shortDate' }}</p>
      }
    </div>

    @if (authService.authUser()?.id == concertLog().userId && showMenu()) {
    <p-menu #menu [model]="items" [popup]="true" />
    <p-button
      class="self-end md:self-start"
      size="small"
      severity="secondary"
      (click)="menu.toggle($event)"
      icon="pi pi-ellipsis-v"
    />

    <app-concert-log-form
      [concert]="concert()"
      [previousConcertLog]="concertLog()"
      [(visible)]="showEdit"
    />

    }
  </div>
</p-card>
